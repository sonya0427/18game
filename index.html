<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>åå…«ä»”å°æˆ°éŠæˆ²</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 50%, #000000 100%);
            min-height: 100vh;
            color: white;
            overflow-x: hidden;
        }

        /* èƒŒæ™¯è£é£¾ */
        .bg-decoration {
            position: fixed;
            inset: 0;
            opacity: 0.05;
            pointer-events: none;
            z-index: 0;
        }

        .bg-decoration::before {
            content: '';
            position: absolute;
            top: 80px;
            left: 80px;
            width: 160px;
            height: 160px;
            background: #fbbf24;
            border-radius: 50%;
            filter: blur(60px);
        }

        .bg-decoration::after {
            content: '';
            position: absolute;
            bottom: 80px;
            right: 80px;
            width: 240px;
            height: 240px;
            background: #ef4444;
            border-radius: 50%;
            filter: blur(60px);
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            position: relative;
            z-index: 10;
        }

        /* æ¨™é¡Œ */
        .title {
            text-align: center;
            margin-bottom: 40px;
        }

        .title h1 {
            font-size: 3rem;
            font-weight: bold;
            background: linear-gradient(45deg, #fbbf24, #ef4444, #fbbf24);
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 16px;
        }

        .title p {
            color: #d1d5db;
            font-size: 1.125rem;
        }

        /* éŸ³æ•ˆæ§åˆ¶ */
        .sound-control {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            margin-top: 16px;
            padding: 8px 16px;
            background: rgba(55, 65, 81, 0.8);
            border: 1px solid rgba(107, 114, 128, 0.5);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            width: fit-content;
            margin-left: auto;
            margin-right: auto;
        }

        .sound-control:hover {
            background: rgba(75, 85, 99, 0.8);
        }

        .sound-control.disabled {
            background: rgba(31, 41, 55, 0.8);
            color: #6b7280;
        }

        /* è¨ˆåˆ†æ¿ */
        .scoreboard {
            background: linear-gradient(45deg, rgba(17, 24, 39, 0.8), rgba(31, 41, 55, 0.8));
            backdrop-filter: blur(16px);
            border-radius: 16px;
            padding: 24px;
            margin-bottom: 32px;
            border: 1px solid rgba(107, 114, 128, 0.5);
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
        }

        .score-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .player-score, .computer-score {
            text-align: center;
        }

        .score-icon {
            width: 48px;
            height: 48px;
            border-radius: 12px;
            margin: 0 auto 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
        }

        .player-score .score-icon {
            background: linear-gradient(135deg, #fbbf24, #f59e0b);
        }

        .computer-score .score-icon {
            background: linear-gradient(135deg, #60a5fa, #3b82f6);
        }

        .score-label {
            color: #d1d5db;
            font-size: 1.125rem;
            font-weight: 500;
            margin-bottom: 8px;
        }

        .score-number {
            font-size: 2.5rem;
            font-weight: bold;
            background: linear-gradient(45deg, #fbbf24, #fde047);
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .vs-divider {
            text-align: center;
            padding: 0 32px;
        }

        .vs-text {
            color: #9ca3af;
            font-size: 1.5rem;
            font-weight: bold;
            margin-bottom: 8px;
        }

        .vs-line {
            width: 64px;
            height: 4px;
            background: linear-gradient(90deg, #fbbf24, #9ca3af, #60a5fa);
            border-radius: 2px;
        }

        /* éŠæˆ²å€åŸŸ */
        .game-area {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 32px;
            margin-bottom: 32px;
        }

        .player-area, .computer-area {
            backdrop-filter: blur(16px);
            border-radius: 16px;
            padding: 32px;
            border: 1px solid rgba(107, 114, 128, 0.3);
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
        }

        .player-area {
            background: linear-gradient(135deg, rgba(6, 78, 59, 0.4), rgba(5, 46, 22, 0.4));
            border-color: rgba(52, 211, 153, 0.3);
        }

        .computer-area {
            background: linear-gradient(135deg, rgba(30, 58, 138, 0.4), rgba(30, 64, 175, 0.4));
            border-color: rgba(59, 130, 246, 0.3);
        }

        .area-title {
            font-size: 1.5rem;
            font-weight: bold;
            text-align: center;
            margin-bottom: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
        }

        .status-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            animation: pulse 2s infinite;
        }

        .player-area .status-dot {
            background: #10b981;
        }

        .computer-area .status-dot {
            background: #3b82f6;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        /* éª°å­å€åŸŸ */
        .dice-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 24px;
            margin-bottom: 24px;
        }

        .dice-container {
            backdrop-filter: blur(4px);
            border-radius: 12px;
            padding: 24px;
            display: flex;
            justify-content: center;
            align-items: center;
            border: 1px solid rgba(107, 114, 128, 0.3);
            box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1);
            position: relative;
            overflow: hidden;
            perspective: 1000px; /* 3D é€è¦–æ•ˆæœ */
        }

        .player-area .dice-container {
            background: linear-gradient(135deg, rgba(6, 95, 70, 0.5), rgba(5, 78, 59, 0.5));
        }

        .computer-area .dice-container {
            background: linear-gradient(135deg, rgba(37, 99, 235, 0.5), rgba(29, 78, 216, 0.5));
        }

        .dice-container::before {
            content: '';
            position: absolute;
            inset: 0;
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.15), transparent 50%, rgba(255, 255, 255, 0.05));
            border-radius: 12px;
            pointer-events: none;
        }

        .dice {
            width: 64px;
            height: 64px;
            background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 50%, #cbd5e1 100%);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 4rem; /* åŠ å¤§ä¸€å€ */
            font-weight: bold;
            color: #1f2937;
            box-shadow: 
                0 8px 16px -4px rgba(0, 0, 0, 0.3),
                0 4px 8px -2px rgba(0, 0, 0, 0.2),
                inset 0 2px 4px 0 rgba(255, 255, 255, 0.8),
                inset 0 -2px 4px 0 rgba(0, 0, 0, 0.1);
            transition: all 0.3s;
            position: relative;
            border: 1px solid rgba(148, 163, 184, 0.3);
        }

        /* ç«‹é«”é‚Šæ¡†æ•ˆæœ */
        .dice::before {
            content: '';
            position: absolute;
            inset: 2px;
            background: linear-gradient(145deg, rgba(255, 255, 255, 0.6), rgba(255, 255, 255, 0.1));
            border-radius: 6px;
            pointer-events: none;
            z-index: -1;
        }

        /* åº•éƒ¨é™°å½± */
        .dice::after {
            content: '';
            position: absolute;
            bottom: -4px;
            left: 2px;
            right: 2px;
            height: 4px;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 50%;
            filter: blur(2px);
            z-index: -2;
        }

        /* 1é»å’Œ4é»ç”¨ç´…è‰² */
        .dice.red-dot {
            color: #dc2626 !important;
            text-shadow: 
                1px 1px 2px rgba(220, 38, 38, 0.3),
                0 0 4px rgba(220, 38, 38, 0.2);
        }

        /* éç´…è‰²é»æ•¸çš„é™°å½±æ•ˆæœ */
        .dice:not(.red-dot) {
            text-shadow: 
                1px 1px 2px rgba(31, 41, 55, 0.3),
                0 0 4px rgba(31, 41, 55, 0.1);
        }

        .dice.rolling {
            animation: spin3d 0.1s linear infinite;
            filter: blur(2px);
            box-shadow: 
                0 12px 24px -6px rgba(0, 0, 0, 0.4),
                0 6px 12px -3px rgba(0, 0, 0, 0.3);
        }

        @keyframes spin3d {
            0% { transform: rotateX(0deg) rotateY(0deg); }
            25% { transform: rotateX(90deg) rotateY(90deg); }
            50% { transform: rotateX(180deg) rotateY(180deg); }
            75% { transform: rotateX(270deg) rotateY(270deg); }
            100% { transform: rotateX(360deg) rotateY(360deg); }
        }

        .dice-hidden {
            width: 64px;
            height: 64px;
            background: linear-gradient(135deg, #4b5563 0%, #374151 50%, #1f2937 100%);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 3rem; /* åŠ å¤§å­—é«” */
            font-weight: bold;
            color: #9ca3af;
            border: 1px solid rgba(107, 114, 128, 0.5);
            box-shadow: 
                0 6px 12px -3px rgba(0, 0, 0, 0.4),
                0 3px 6px -1px rgba(0, 0, 0, 0.3),
                inset 0 2px 4px 0 rgba(255, 255, 255, 0.1),
                inset 0 -2px 4px 0 rgba(0, 0, 0, 0.3);
            position: relative;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);
        }

        /* éš±è—éª°å­çš„ç«‹é«”é‚Šæ¡† */
        .dice-hidden::before {
            content: '';
            position: absolute;
            inset: 2px;
            background: linear-gradient(145deg, rgba(255, 255, 255, 0.1), rgba(255, 255, 255, 0.02));
            border-radius: 10px;
            pointer-events: none;
            z-index: -1;
        }

        /* éš±è—éª°å­çš„åº•éƒ¨é™°å½± */
        .dice-hidden::after {
            content: '';
            position: absolute;
            bottom: -3px;
            left: 2px;
            right: 2px;
            height: 3px;
            background: rgba(0, 0, 0, 0.4);
            border-radius: 50%;
            filter: blur(2px);
            z-index: -2;
        }

        .score-display {
            text-align: center;
        }

        .score-value {
            font-size: 1.875rem;
            font-weight: bold;
            background: linear-gradient(45deg, #fbbf24, #fde047);
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .score-type {
            color: #d1d5db;
            margin-top: 8px;
        }

        /* éŠæˆ²çµæœ */
        .game-result {
            background: linear-gradient(45deg, rgba(17, 24, 39, 0.9), rgba(31, 41, 55, 0.9));
            backdrop-filter: blur(16px);
            border-radius: 16px;
            padding: 32px;
            text-align: center;
            border: 1px solid rgba(107, 114, 128, 0.5);
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
            margin-bottom: 32px;
        }

        .result-title {
            font-size: 2.5rem;
            font-weight: bold;
            background: linear-gradient(45deg, #fbbf24, #ef4444, #fbbf24);
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 16px;
        }

        .result-details {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 16px;
            max-width: 400px;
            margin: 0 auto;
        }

        .result-card {
            border-radius: 8px;
            padding: 12px;
        }

        .result-card.player {
            background: rgba(6, 78, 59, 0.3);
        }

        .result-card.computer {
            background: rgba(30, 58, 138, 0.3);
        }

        .result-card-title {
            font-weight: 600;
            margin-bottom: 4px;
        }

        .result-card.player .result-card-title {
            color: #6ee7b7;
        }

        .result-card.computer .result-card-title {
            color: #93c5fd;
        }

        /* æ§åˆ¶æŒ‰éˆ• */
        .controls {
            display: flex;
            flex-direction: column;
            gap: 16px;
            align-items: center;
            margin-bottom: 32px;
        }

        .btn {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            padding: 16px 40px;
            border-radius: 12px;
            font-weight: bold;
            font-size: 1.125rem;
            border: none;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1);
            min-width: 200px;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 20px 40px -10px rgba(0, 0, 0, 0.2);
        }

        .btn:disabled {
            transform: none;
            box-shadow: none;
            cursor: not-allowed;
        }

        .btn-primary {
            background: linear-gradient(45deg, #dc2626, #b91c1c);
            color: white;
            border: 1px solid rgba(239, 68, 68, 0.3);
        }

        .btn-primary:hover:not(:disabled) {
            background: linear-gradient(45deg, #b91c1c, #991b1b);
        }

        .btn-primary:disabled {
            background: linear-gradient(45deg, #374151, #1f2937);
            border-color: rgba(107, 114, 128, 0.3);
        }

        .btn-secondary {
            background: linear-gradient(45deg, #374151, #1f2937);
            color: white;
            border: 1px solid rgba(107, 114, 128, 0.3);
        }

        .btn-secondary:hover {
            background: linear-gradient(45deg, #4b5563, #374151);
        }

        /* éŠæˆ²è¦å‰‡ */
        .rules {
            background: linear-gradient(45deg, rgba(17, 24, 39, 0.6), rgba(31, 41, 55, 0.6));
            backdrop-filter: blur(16px);
            border-radius: 16px;
            padding: 32px;
            border: 1px solid rgba(107, 114, 128, 0.5);
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
        }

        .rules h3 {
            font-size: 1.5rem;
            font-weight: bold;
            background: linear-gradient(45deg, #fbbf24, #fde047);
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 24px;
        }

        .rules-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 24px;
        }

        .rule-item {
            display: flex;
            align-items: flex-start;
            gap: 12px;
        }

        .rule-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            margin-top: 8px;
            flex-shrink: 0;
        }

        .rule-dot.yellow {
            background: #fbbf24;
        }

        .rule-dot.red {
            background: #ef4444;
        }

        .rule-text {
            color: #d1d5db;
        }

        /* ç…™ç«æ•ˆæœ */
        .fireworks {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 9999;
            overflow: hidden;
        }

        .firework {
            position: absolute;
            width: 4px;
            height: 4px;
            border-radius: 50%;
            animation: firework-explosion 2s ease-out forwards;
        }

        .firework.red { background: #ff4444; }
        .firework.blue { background: #4444ff; }
        .firework.green { background: #44ff44; }
        .firework.yellow { background: #ffff44; }
        .firework.purple { background: #ff44ff; }
        .firework.orange { background: #ff8844; }

        @keyframes firework-explosion {
            0% {
                transform: scale(0);
                opacity: 1;
                box-shadow: 0 0 20px currentColor;
            }
            50% {
                transform: scale(1);
                opacity: 0.8;
                box-shadow: 
                    0 0 40px currentColor,
                    0 0 80px currentColor;
            }
            100% {
                transform: scale(2);
                opacity: 0;
                box-shadow: 
                    0 0 60px currentColor,
                    0 0 120px currentColor;
            }
        }

        .sparkle {
            position: absolute;
            width: 2px;
            height: 2px;
            background: white;
            border-radius: 50%;
            animation: sparkle-fall 3s linear forwards;
        }

        @keyframes sparkle-fall {
            0% {
                transform: translateY(0) rotate(0deg);
                opacity: 1;
                box-shadow: 0 0 10px white;
            }
            100% {
                transform: translateY(100vh) rotate(360deg);
                opacity: 0;
            }
        }

        /* å‹åˆ©æ–‡å­—å‹•ç•« */
        .victory-text {
            animation: victory-bounce 1s ease-in-out infinite alternate;
        }

        @keyframes victory-bounce {
            0% {
                transform: scale(1) rotate(-2deg);
                text-shadow: 0 0 20px #fbbf24;
            }
            100% {
                transform: scale(1.1) rotate(2deg);
                text-shadow: 0 0 40px #fbbf24, 0 0 60px #f59e0b;
            }
        }

        /* è„ˆè¡å…‰æšˆ */
        .pulse-glow {
            animation: pulse-glow 2s ease-in-out infinite;
        }

        @keyframes pulse-glow {
            0%, 100% {
                box-shadow: 0 0 20px rgba(251, 191, 36, 0.5);
            }
            50% {
                box-shadow: 
                    0 0 40px rgba(251, 191, 36, 0.8),
                    0 0 80px rgba(251, 191, 36, 0.4);
            }
        }
        @media (max-width: 768px) {
            .container {
                padding: 16px;
            }

            .title h1 {
                font-size: 2rem;
            }

            .game-area {
                grid-template-columns: 1fr;
                gap: 24px;
            }

            .score-container {
                flex-direction: column;
                gap: 20px;
            }

            .vs-divider {
                padding: 0;
            }

            .controls {
                flex-direction: column;
            }

            .rules-grid {
                grid-template-columns: 1fr;
            }

            .result-details {
                grid-template-columns: 1fr;
            }
        }

        @media (min-width: 768px) {
            .controls {
                flex-direction: row;
            }
        }
    </style>
</head>
<body>
    <div class="bg-decoration"></div>
    
    <div class="container">
        <!-- æ¨™é¡Œ -->
        <div class="title">
            <h1>åå…«ä»”å°æˆ°</h1>
            <p>å‚³çµ±å°ç£éª°å­éŠæˆ² â€¢ èˆ‡é›»è…¦å°æ±º</p>
            
            <!-- éŸ³æ•ˆæ§åˆ¶ -->
            <div class="sound-control" id="soundControl">
                <span>ğŸ”Š</span>
                <span id="soundText">éŸ³æ•ˆ é–‹å•Ÿ</span>
            </div>
        </div>

        <!-- è¨ˆåˆ†æ¿ -->
        <div class="scoreboard">
            <div class="score-container">
                <div class="player-score">
                    <div class="score-icon">ğŸ†</div>
                    <div class="score-label">ç©å®¶å‹å ´</div>
                    <div class="score-number" id="playerWins">0</div>
                </div>
                
                <div class="vs-divider">
                    <div class="vs-text">VS</div>
                    <div class="vs-line"></div>
                </div>
                
                <div class="computer-score">
                    <div class="score-icon">ğŸ¤–</div>
                    <div class="score-label">é›»è…¦å‹å ´</div>
                    <div class="score-number" id="computerWins">0</div>
                </div>
            </div>
        </div>

        <!-- éŠæˆ²å€åŸŸ -->
        <div class="game-area">
            <!-- ç©å®¶å€åŸŸ -->
            <div class="player-area">
                <h2 class="area-title">
                    <div class="status-dot"></div>
                    ç©å®¶
                </h2>
                
                <div class="dice-grid" id="playerDiceGrid">
                    <div class="dice-container">
                        <div class="dice" id="playerDice1">âš€</div>
                    </div>
                    <div class="dice-container">
                        <div class="dice" id="playerDice2">âš€</div>
                    </div>
                    <div class="dice-container">
                        <div class="dice" id="playerDice3">âš€</div>
                    </div>
                    <div class="dice-container">
                        <div class="dice" id="playerDice4">âš€</div>
                    </div>
                </div>
                
                <div class="score-display">
                    <div class="score-value" id="playerScore">å¾…æ“²éª°</div>
                    <div class="score-type" id="playerType"></div>
                </div>
            </div>

            <!-- é›»è…¦å€åŸŸ -->
            <div class="computer-area">
                <h2 class="area-title">
                    <div class="status-dot"></div>
                    é›»è…¦
                </h2>
                
                <div class="dice-grid" id="computerDiceGrid">
                    <div class="dice-container">
                        <div class="dice-hidden" id="computerDice1">?</div>
                    </div>
                    <div class="dice-container">
                        <div class="dice-hidden" id="computerDice2">?</div>
                    </div>
                    <div class="dice-container">
                        <div class="dice-hidden" id="computerDice3">?</div>
                    </div>
                    <div class="dice-container">
                        <div class="dice-hidden" id="computerDice4">?</div>
                    </div>
                </div>
                
                <div class="score-display">
                    <div class="score-value" id="computerScore">å¾…æ­æ›‰</div>
                    <div class="score-type" id="computerType"></div>
                </div>
            </div>
        </div>

        <!-- éŠæˆ²çµæœ -->
        <div class="game-result" id="gameResult" style="display: none;">
            <div class="result-title" id="resultTitle"></div>
            <div class="result-details" id="resultDetails" style="display: none;">
                <div class="result-card player">
                    <div class="result-card-title">ç©å®¶</div>
                    <div id="playerResultType"></div>
                </div>
                <div class="result-card computer">
                    <div class="result-card-title">é›»è…¦</div>
                    <div id="computerResultType"></div>
                </div>
            </div>
        </div>

        <!-- æ§åˆ¶æŒ‰éˆ• -->
        <div class="controls">
            <button class="btn btn-primary" id="rollBtn">
                â–¶ï¸ é–‹å§‹æ“²éª°
            </button>
            
            <button class="btn btn-secondary" id="resetBtn">
                ğŸ”„ é‡ç½®éŠæˆ²
            </button>
        </div>

        <!-- éŠæˆ²è¦å‰‡ -->
        <div class="rules">
            <h3>éŠæˆ²è¦å‰‡</h3>
            <div class="rules-grid">
                <div>
                    <div class="rule-item">
                        <div class="rule-dot yellow"></div>
                        <div class="rule-text">ä½¿ç”¨å››é¡†å…­é¢éª°å­</div>
                    </div>
                    <div class="rule-item">
                        <div class="rule-dot yellow"></div>
                        <div class="rule-text">å…ˆæ‰£é™¤å…©é¡†é»æ•¸ç›¸åŒçš„éª°å­ï¼ˆå°å­ï¼‰</div>
                    </div>
                    <div class="rule-item">
                        <div class="rule-dot yellow"></div>
                        <div class="rule-text">å‰©é¤˜å…©é¡†ç›¸åŠ ç‚ºå¾—åˆ†</div>
                    </div>
                    <div class="rule-item">
                        <div class="rule-dot yellow"></div>
                        <div class="rule-text">å…©çµ„å°å­æ™‚ï¼Œå–è¼ƒé«˜å°å­ Ã— 2 è¨ˆåˆ†</div>
                    </div>
                    <div class="rule-item">
                        <div class="rule-dot yellow"></div>
                        <div class="rule-text">å¦‚ 2,2,6,6 â†’ å–6Ã—2 = 12é»ï¼ˆåå…«ï¼ï¼‰</div>
                    </div>
                </div>
                <div>
                    <div class="rule-item">
                        <div class="rule-dot red"></div>
                        <div class="rule-text">å››é¡†æˆ–ä¸‰é¡†éƒ½ä¸åŒç‚ºã€Œæ²’é¢ã€</div>
                    </div>
                    <div class="rule-item">
                        <div class="rule-dot red"></div>
                        <div class="rule-text">å››é¡†ç›¸åŒç‚ºã€Œä¸€è‰²ã€ï¼Œé»æ•¸æœ€å¤§</div>
                    </div>
                    <div class="rule-item">
                        <div class="rule-dot red"></div>
                        <div class="rule-text">ä¸‰é¡†ç›¸åŒéœ€è¦é‡æ“²</div>
                    </div>
                    <div class="rule-item">
                        <div class="rule-dot red"></div>
                        <div class="rule-text">æœ€é«˜12é»ç¨±ç‚ºã€Œåå…«ã€</div>
                    </div>
                    <div class="rule-item">
                        <div class="rule-dot red"></div>
                        <div class="rule-text">æœ€ä½3é»ç¨±ç‚ºã€ŒBGã€</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        console.log('é–‹å§‹è¼‰å…¥éŠæˆ²è…³æœ¬...');
        
        // éŠæˆ²ç‹€æ…‹
        let gameState = {
            playerDice: [1, 1, 1, 1],
            computerDice: [1, 1, 1, 1],
            playerWins: 0,
            computerWins: 0,
            isRolling: false,
            soundEnabled: true,
            gamePhase: 'ready', // ready, rolling, result, playerReroll
            computerResult: null // å„²å­˜é›»è…¦çš„çµæœ
        };

        // DOM å…ƒç´ 
        const elements = {
            rollBtn: null,
            resetBtn: null,
            soundControl: null,
            soundText: null,
            playerWins: null,
            computerWins: null,
            playerScore: null,
            computerScore: null,
            playerType: null,
            computerType: null,
            gameResult: null,
            resultTitle: null,
            resultDetails: null,
            playerResultType: null,
            computerResultType: null
        };

        // å‰µå»ºç…™ç«æ•ˆæœ
        function createFireworks() {
            console.log('ğŸ† å•Ÿå‹•ç…™ç«æ•ˆæœï¼');
            
            // å‰µå»ºç…™ç«å®¹å™¨
            const fireworksContainer = document.createElement('div');
            fireworksContainer.className = 'fireworks';
            document.body.appendChild(fireworksContainer);
            
            const colors = ['red', 'blue', 'green', 'yellow', 'purple', 'orange'];
            let fireworkCount = 0;
            const maxFireworks = 30;
            
            // å‰µå»ºå¤šå€‹ç…™ç«
            const fireworkInterval = setInterval(() => {
                if (fireworkCount >= maxFireworks) {
                    clearInterval(fireworkInterval);
                    // 5ç§’å¾Œç§»é™¤ç…™ç«å®¹å™¨
                    setTimeout(() => {
                        if (document.body.contains(fireworksContainer)) {
                            document.body.removeChild(fireworksContainer);
                        }
                    }, 5000);
                    return;
                }
                
                // éš¨æ©Ÿä½ç½®å‰µå»ºç…™ç«
                const x = Math.random() * window.innerWidth;
                const y = Math.random() * (window.innerHeight * 0.6) + (window.innerHeight * 0.1);
                
                createSingleFirework(fireworksContainer, x, y, colors);
                fireworkCount++;
            }, 200);
            
            // å‰µå»ºé¡å¤–çš„é–ƒçˆæ˜Ÿæ˜Ÿ
            createSparkles(fireworksContainer);
        }
        
        // å‰µå»ºå–®å€‹ç…™ç«
        function createSingleFirework(container, x, y, colors) {
            const particleCount = 12;
            const color = colors[Math.floor(Math.random() * colors.length)];
            
            for (let i = 0; i < particleCount; i++) {
                const particle = document.createElement('div');
                particle.className = `firework ${color}`;
                particle.style.left = x + 'px';
                particle.style.top = y + 'px';
                
                // éš¨æ©Ÿæ–¹å‘å’Œè·é›¢
                const angle = (360 / particleCount) * i;
                const distance = 50 + Math.random() * 100;
                const duration = 1.5 + Math.random() * 1;
                
                particle.style.animation = `firework-explosion ${duration}s ease-out forwards`;
                particle.style.transform = `rotate(${angle}deg) translateX(${distance}px)`;
                
                container.appendChild(particle);
                
                // ç§»é™¤ç²’å­
                setTimeout(() => {
                    if (container.contains(particle)) {
                        container.removeChild(particle);
                    }
                }, duration * 1000);
            }
        }
        
        // å‰µå»ºé–ƒçˆæ˜Ÿæ˜Ÿ
        function createSparkles(container) {
            for (let i = 0; i < 50; i++) {
                setTimeout(() => {
                    const sparkle = document.createElement('div');
                    sparkle.className = 'sparkle';
                    sparkle.style.left = Math.random() * window.innerWidth + 'px';
                    sparkle.style.top = Math.random() * (window.innerHeight * 0.3) + 'px';
                    
                    container.appendChild(sparkle);
                    
                    // 3ç§’å¾Œç§»é™¤
                    setTimeout(() => {
                        if (container.contains(sparkle)) {
                            container.removeChild(sparkle);
                        }
                    }, 3000);
                }, Math.random() * 2000);
            }
        }
        function playSound(type) {
            if (!gameState.soundEnabled) return;
            
            try {
                const audioContext = new (window.AudioContext || window.webkitAudioContext)();
                
                if (type === 'roll') {
                    // éª°å­æ»¾å‹•éŸ³æ•ˆ
                    const oscillator = audioContext.createOscillator();
                    const gainNode = audioContext.createGain();
                    
                    oscillator.type = 'square';
                    oscillator.frequency.setValueAtTime(Math.random() * 200 + 100, audioContext.currentTime);
                    
                    gainNode.gain.setValueAtTime(0.1, audioContext.currentTime);
                    gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.1);
                    
                    oscillator.connect(gainNode);
                    gainNode.connect(audioContext.destination);
                    
                    oscillator.start(audioContext.currentTime);
                    oscillator.stop(audioContext.currentTime + 0.1);
                } else if (type === 'win') {
                    // å‹åˆ©éŸ³æ•ˆ
                    const notes = [523.25, 659.25, 783.99];
                    notes.forEach((freq, index) => {
                        setTimeout(() => {
                            const oscillator = audioContext.createOscillator();
                            const gainNode = audioContext.createGain();
                            
                            oscillator.type = 'sine';
                            oscillator.frequency.setValueAtTime(freq, audioContext.currentTime);
                            
                            gainNode.gain.setValueAtTime(0.2, audioContext.currentTime);
                            gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.3);
                            
                            oscillator.connect(gainNode);
                            gainNode.connect(audioContext.destination);
                            
                            oscillator.start(audioContext.currentTime);
                            oscillator.stop(audioContext.currentTime + 0.3);
                        }, index * 150);
                    });
                } else if (type === 'lose') {
                    // å¤±æ•—éŸ³æ•ˆ
                    const oscillator = audioContext.createOscillator();
                    const gainNode = audioContext.createGain();
                    
                    oscillator.type = 'sawtooth';
                    oscillator.frequency.setValueAtTime(200, audioContext.currentTime);
                    oscillator.frequency.exponentialRampToValueAtTime(100, audioContext.currentTime + 0.5);
                    
                    gainNode.gain.setValueAtTime(0.2, audioContext.currentTime);
                    gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.5);
                    
                    oscillator.connect(gainNode);
                    gainNode.connect(audioContext.destination);
                    
                    oscillator.start(audioContext.currentTime);
                    oscillator.stop(audioContext.currentTime + 0.5);
                }
            } catch (error) {
                console.log('Audio context not supported:', error);
            }
        }

        // è¨ˆç®—åå…«ä»”é»æ•¸
        function calculateScore(dice) {
            const counts = {};
            dice.forEach(d => counts[d] = (counts[d] || 0) + 1);
            
            // æª¢æŸ¥æ˜¯å¦ç‚ºä¸€è‰²ï¼ˆå››å€‹ç›¸åŒï¼‰
            const values = Object.values(counts);
            if (values.includes(4)) {
                return { score: 24, type: 'ä¸€è‰²', specialType: true };
            }
            
            // æª¢æŸ¥æ˜¯å¦æœ‰ä¸‰å€‹ç›¸åŒï¼ˆæ²’é¢ - éœ€é‡æ“²ï¼‰
            if (values.includes(3)) {
                return { score: 0, type: 'æ²’é¢', specialType: true };
            }
            
            // æª¢æŸ¥æ˜¯å¦ç‚ºæ²’é¢ï¼ˆå››å€‹éƒ½ä¸åŒï¼‰
            const uniqueValues = Object.keys(counts).length;
            const maxCount = Math.max(...values);
            
            // å››å€‹éƒ½ä¸åŒ æˆ– ä¸‰å€‹ä¸åŒä¸”æœ€å¤§å‡ºç¾æ¬¡æ•¸ç‚º1ï¼ˆè¡¨ç¤ºæ²’æœ‰å°å­ï¼‰
            if (uniqueValues === 4 || (uniqueValues === 3 && maxCount === 1)) {
                return { score: 0, type: 'æ²’é¢', specialType: true };
            }
            
            // æ‰¾å‡ºæ‰€æœ‰çš„å°å­ï¼ˆé»æ•¸ç›¸åŒä¸”å‡ºç¾2æ¬¡ä»¥ä¸Šçš„ï¼‰
            const pairs = [];
            for (const [value, count] of Object.entries(counts)) {
                if (count >= 2) {
                    pairs.push(parseInt(value));
                }
            }
            
            let remainingDice = [...dice];
            
            if (pairs.length > 0) {
                // å¦‚æœæœ‰å¤šçµ„å°å­ï¼Œé¸æ“‡é»æ•¸æœ€é«˜çš„ä¸€çµ„
                const selectedPair = Math.max(...pairs);
                
                // ç§»é™¤é¸ä¸­çš„å°å­ï¼ˆå…©é¡†ï¼‰
                let pairRemoved = 0;
                remainingDice = remainingDice.filter(d => {
                    if (d === selectedPair && pairRemoved < 2) {
                        pairRemoved++;
                        return false;
                    }
                    return true;
                });
            }
            
            // è¨ˆç®—å‰©é¤˜éª°å­çš„ç¸½å’Œ
            const finalScore = remainingDice.reduce((sum, d) => sum + d, 0);
            
            let scoreType = '';
            if (finalScore === 12) scoreType = 'åå…«ï¼';
            else if (finalScore === 3) scoreType = 'BG';
            else scoreType = `${finalScore}é»`;
            
            return { score: finalScore, type: scoreType, specialType: false };
        }

        // æ›´æ–°éª°å­é¡¯ç¤º
        function updateDiceDisplay(isPlayer, dice, showDice = true) {
            const prefix = isPlayer ? 'player' : 'computer';
            
            for (let i = 1; i <= 4; i++) {
                const diceElement = document.getElementById(`${prefix}Dice${i}`);
                
                if (showDice) {
                    diceElement.className = 'dice';
                    const diceValue = dice[i - 1];
                    diceElement.textContent = getDiceSymbol(diceValue);
                    
                    // å¦‚æœæ˜¯1é»æˆ–4é»ï¼Œæ·»åŠ ç´…è‰²æ¨£å¼
                    if (diceValue === 1 || diceValue === 4) {
                        diceElement.classList.add('red-dot');
                    } else {
                        diceElement.classList.remove('red-dot');
                    }
                } else {
                    diceElement.className = 'dice-hidden';
                    diceElement.textContent = '?';
                }
            }
        }

        // ç²å–éª°å­ç¬¦è™Ÿ
        function getDiceSymbol(value) {
            const symbols = ['âš€', 'âš', 'âš‚', 'âšƒ', 'âš„', 'âš…'];
            return symbols[value - 1];
        }

        // è¨­ç½®éª°å­æ—‹è½‰å‹•ç•«
        function setDiceRolling(isRolling) {
            for (let i = 1; i <= 4; i++) {
                const playerDice = document.getElementById(`playerDice${i}`);
                const computerDice = document.getElementById(`computerDice${i}`);
                
                if (isRolling) {
                    playerDice.classList.add('rolling');
                    if (computerDice.className === 'dice') {
                        computerDice.classList.add('rolling');
                    }
                } else {
                    playerDice.classList.remove('rolling');
                    computerDice.classList.remove('rolling');
                }
            }
        }

        // æ“²éª°å­
        function rollDice() {
            console.log('rollDice å‡½æ•¸è¢«èª¿ç”¨');
            if (gameState.isRolling) {
                console.log('æ­£åœ¨æ“²éª°ä¸­ï¼Œå¿½ç•¥é»æ“Š');
                return;
            }
            
            gameState.isRolling = true;
            
            // åˆ¤æ–·æ˜¯å¦ç‚ºç©å®¶é‡æ“²
            const isPlayerReroll = (gameState.gamePhase === 'playerReroll');
            
            if (isPlayerReroll) {
                // ç©å®¶é‡æ“²æ¨¡å¼ï¼šåªé‡æ“²ç©å®¶éª°å­
                gameState.gamePhase = 'rolling';
                elements.rollBtn.textContent = 'ğŸ² é‡æ“²ä¸­...';
                elements.rollBtn.disabled = true;
                
                // éš±è—çµæœä½†ä¿æŒé›»è…¦éª°å­é¡¯ç¤º
                elements.gameResult.style.display = 'none';
                elements.playerScore.textContent = 'æ“²éª°ä¸­...';
                elements.playerType.textContent = '';
                
                // æ’­æ”¾éŸ³æ•ˆ
                playSound('roll');
                
                // é–‹å§‹ç©å®¶éª°å­æ—‹è½‰å‹•ç•«
                for (let i = 1; i <= 4; i++) {
                    const playerDice = document.getElementById(`playerDice${i}`);
                    playerDice.classList.add('rolling');
                }
                
                // ç©å®¶éª°å­å‹•ç•«æ•ˆæœ
                const rollInterval = setInterval(() => {
                    const newPlayerDice = [
                        Math.floor(Math.random() * 6) + 1,
                        Math.floor(Math.random() * 6) + 1,
                        Math.floor(Math.random() * 6) + 1,
                        Math.floor(Math.random() * 6) + 1
                    ];
                    
                    updateDiceDisplay(true, newPlayerDice);
                    playSound('roll');
                }, 150);
                
                // åœæ­¢å‹•ç•«ä¸¦è¨ˆç®—çµæœ
                setTimeout(() => {
                    clearInterval(rollInterval);
                    
                    // åœæ­¢ç©å®¶éª°å­æ—‹è½‰
                    for (let i = 1; i <= 4; i++) {
                        const playerDice = document.getElementById(`playerDice${i}`);
                        playerDice.classList.remove('rolling');
                    }
                    
                    // ç”Ÿæˆç©å®¶æœ€çµ‚çµæœ
                    gameState.playerDice = [
                        Math.floor(Math.random() * 6) + 1,
                        Math.floor(Math.random() * 6) + 1,
                        Math.floor(Math.random() * 6) + 1,
                        Math.floor(Math.random() * 6) + 1
                    ];
                    
                    // æ›´æ–°ç©å®¶éª°å­é¡¯ç¤º
                    updateDiceDisplay(true, gameState.playerDice);
                    
                    // è™•ç†é‡æ“²å¾Œçš„éŠæˆ²çµæœ
                    processGameResult();
                    
                }, 3000); // 2000 * 1.5 = 3000
                
            } else {
                // æ­£å¸¸æ“²éª°æ¨¡å¼
                gameState.gamePhase = 'rolling';
                gameState.computerResult = null; // é‡ç½®é›»è…¦çµæœ
                
                // éš±è—çµæœ
                elements.gameResult.style.display = 'none';
                
                // æ›´æ–°æŒ‰éˆ•ç‹€æ…‹
                elements.rollBtn.textContent = 'ğŸ² æ“²éª°ä¸­...';
                elements.rollBtn.disabled = true;
                
                // éš±è—é›»è…¦éª°å­
                updateDiceDisplay(false, [1, 1, 1, 1], false);
                elements.computerScore.textContent = 'å¾…æ­æ›‰';
                elements.computerType.textContent = '';
                
                // æ’­æ”¾éŸ³æ•ˆ
                playSound('roll');
                
                // é–‹å§‹æ—‹è½‰å‹•ç•«
                setDiceRolling(true);
                
                // å‹•ç•«æ•ˆæœ
                const rollInterval = setInterval(() => {
                    const newPlayerDice = [
                        Math.floor(Math.random() * 6) + 1,
                        Math.floor(Math.random() * 6) + 1,
                        Math.floor(Math.random() * 6) + 1,
                        Math.floor(Math.random() * 6) + 1
                    ];
                    
                    updateDiceDisplay(true, newPlayerDice);
                    playSound('roll');
                }, 150);
                
                // åœæ­¢å‹•ç•«ä¸¦è¨ˆç®—çµæœ
                setTimeout(() => {
                    clearInterval(rollInterval);
                    setDiceRolling(false);
                    
                    // ç”Ÿæˆæœ€çµ‚çµæœ
                    gameState.playerDice = [
                        Math.floor(Math.random() * 6) + 1,
                        Math.floor(Math.random() * 6) + 1,
                        Math.floor(Math.random() * 6) + 1,
                        Math.floor(Math.random() * 6) + 1
                    ];
                    
                    // é›»è…¦æ“²éª°ï¼Œå¦‚æœæ˜¯æ²’é¢å°±é‡æ“²
                    generateComputerDice();
                    
                    // æ›´æ–°é¡¯ç¤º
                    updateDiceDisplay(true, gameState.playerDice);
                    updateDiceDisplay(false, gameState.computerDice, true);
                    
                    // è¨ˆç®—åˆ†æ•¸å’Œåˆ¤å®šçµæœ
                    processGameResult();
                    
                }, 3750); // 2500 * 1.5 = 3750
            }
        }

        // ç”Ÿæˆé›»è…¦éª°å­ï¼ˆè‡ªå‹•é‡æ“²æ²’é¢ï¼‰
        function generateComputerDice() {
            let attempts = 0;
            const maxAttempts = 10; // é¿å…ç„¡é™å¾ªç’°
            
            do {
                gameState.computerDice = [
                    Math.floor(Math.random() * 6) + 1,
                    Math.floor(Math.random() * 6) + 1,
                    Math.floor(Math.random() * 6) + 1,
                    Math.floor(Math.random() * 6) + 1
                ];
                
                const computerResult = calculateScore(gameState.computerDice);
                attempts++;
                
                // å¦‚æœä¸æ˜¯æ²’é¢ï¼Œæˆ–å˜—è©¦æ¬¡æ•¸éå¤šï¼Œå°±åœæ­¢
                if (!computerResult.specialType || computerResult.type !== 'æ²’é¢' || attempts >= maxAttempts) {
                    console.log(`é›»è…¦æ“²éª°çµæœ: ${gameState.computerDice}, å˜—è©¦æ¬¡æ•¸: ${attempts}`);
                    break;
                }
                
                console.log(`é›»è…¦æ“²åˆ°æ²’é¢: ${gameState.computerDice}, é‡æ“²ä¸­... (ç¬¬${attempts}æ¬¡)`);
            } while (attempts < maxAttempts);
        }

        // è™•ç†éŠæˆ²çµæœ
        function processGameResult() {
            // è¨ˆç®—åˆ†æ•¸
            const playerResult = calculateScore(gameState.playerDice);
            const computerResult = gameState.computerResult || calculateScore(gameState.computerDice);
            
            // å„²å­˜é›»è…¦çµæœï¼ˆç”¨æ–¼ç©å®¶é‡æ“²æ™‚ä¿æŒä¸è®Šï¼‰
            gameState.computerResult = computerResult;
            
            // æ›´æ–°åˆ†æ•¸é¡¯ç¤º
            elements.playerScore.textContent = playerResult.score > 0 ? `${playerResult.score}é»` : playerResult.type;
            elements.playerType.textContent = playerResult.type;
            elements.computerScore.textContent = computerResult.score > 0 ? `${computerResult.score}é»` : computerResult.type;
            elements.computerType.textContent = computerResult.type;
            
            // åˆ¤å®šå‹è² 
            let result = '';
            let soundType = '';
            
            // æª¢æŸ¥ç©å®¶æ˜¯å¦éœ€è¦é‡æ“²
            const playerNeedsReroll = (playerResult.specialType && playerResult.type === 'æ²’é¢');
            
            if (playerNeedsReroll) {
                result = 'ç©å®¶æ²’é¢ï¼Œéœ€é‡æ“²ï¼é›»è…¦ç­‰å¾…ä¸­...';
                gameState.gamePhase = 'playerReroll';
                elements.rollBtn.textContent = 'ğŸ² ç©å®¶é‡æ“²';
            } else if (playerResult.specialType && playerResult.type === 'ä¸€è‰²') {
                result = 'ç©å®¶ä¸€è‰²ç²å‹ï¼ğŸ‰';
                gameState.playerWins++;
                soundType = 'win';
                gameState.gamePhase = 'result';
                elements.rollBtn.textContent = 'â–¶ï¸ é–‹å§‹æ“²éª°';
                
                // ä¸€è‰²ç²å‹æ™‚è§¸ç™¼æ›´ç››å¤§çš„ç…™ç«æ•ˆæœ
                setTimeout(() => {
                    createFireworks();
                    setTimeout(() => createFireworks(), 1000); // é›™é‡ç…™ç«
                }, 500);
                            } else if (computerResult.specialType && computerResult.type === 'ä¸€è‰²') {
                result = 'é›»è…¦ä¸€è‰²ç²å‹ï¼';
                gameState.computerWins++;
                soundType = 'lose';
                gameState.gamePhase = 'result';
                elements.rollBtn.textContent = 'â–¶ï¸ é–‹å§‹æ“²éª°';
            } else if (playerResult.score > computerResult.score) {
                result = 'ç©å®¶ç²å‹ï¼ğŸ‰';
                gameState.playerWins++;
                soundType = 'win';
                gameState.gamePhase = 'result';
                elements.rollBtn.textContent = 'â–¶ï¸ é–‹å§‹æ“²éª°';
                
                // ç©å®¶ç²å‹æ™‚è§¸ç™¼ç…™ç«æ•ˆæœ
                setTimeout(() => {
                    createFireworks();
                }, 500);
            } else if (computerResult.score > playerResult.score) {
                result = 'é›»è…¦ç²å‹ï¼';
                gameState.computerWins++;
                soundType = 'lose';
                gameState.gamePhase = 'result';
                elements.rollBtn.textContent = 'â–¶ï¸ é–‹å§‹æ“²éª°';
            } else {
                result = 'å¹³æ‰‹ï¼';
                gameState.gamePhase = 'result';
                elements.rollBtn.textContent = 'â–¶ï¸ é–‹å§‹æ“²éª°';
            }
            
            // æ›´æ–°å‹å ´æ•¸
            elements.playerWins.textContent = gameState.playerWins;
            elements.computerWins.textContent = gameState.computerWins;
            
            // é¡¯ç¤ºçµæœ
            elements.resultTitle.textContent = result;
            elements.playerResultType.textContent = playerResult.type;
            elements.computerResultType.textContent = computerResult.type;
            elements.gameResult.style.display = 'block';
            elements.resultDetails.style.display = 'grid';
            
            // ç©å®¶ç²å‹æ™‚æ·»åŠ ç‰¹æ®Šæ¨£å¼
            if (soundType === 'win') {
                elements.resultTitle.classList.add('victory-text');
                elements.gameResult.classList.add('pulse-glow');
                
                // 3ç§’å¾Œç§»é™¤ç‰¹æ®Šæ¨£å¼
                setTimeout(() => {
                    elements.resultTitle.classList.remove('victory-text');
                    elements.gameResult.classList.remove('pulse-glow');
                }, 3000);
            }
            
            // æ’­æ”¾çµæœéŸ³æ•ˆ
            if (soundType) {
                setTimeout(() => playSound(soundType), 300);
            }
            
            // é‡ç½®æŒ‰éˆ•ç‹€æ…‹
            gameState.isRolling = false;
            elements.rollBtn.disabled = false;
        }

        // é‡ç½®éŠæˆ²
        function resetGame() {
            console.log('resetGame å‡½æ•¸è¢«èª¿ç”¨');
            gameState = {
                playerDice: [1, 1, 1, 1],
                computerDice: [1, 1, 1, 1],
                playerWins: 0,
                computerWins: 0,
                isRolling: false,
                soundEnabled: gameState.soundEnabled,
                gamePhase: 'ready',
                computerResult: null
            };
            
            // é‡ç½®é¡¯ç¤º
            updateDiceDisplay(true, [1, 1, 1, 1]);
            updateDiceDisplay(false, [1, 1, 1, 1], false);
            
            elements.playerScore.textContent = 'å¾…æ“²éª°';
            elements.computerScore.textContent = 'å¾…æ­æ›‰';
            elements.playerType.textContent = '';
            elements.computerType.textContent = '';
            elements.playerWins.textContent = '0';
            elements.computerWins.textContent = '0';
            elements.gameResult.style.display = 'none';
            elements.rollBtn.disabled = false;
            elements.rollBtn.textContent = 'â–¶ï¸ é–‹å§‹æ“²éª°';
        }

        // åˆ‡æ›éŸ³æ•ˆ
        function toggleSound() {
            console.log('toggleSound å‡½æ•¸è¢«èª¿ç”¨');
            gameState.soundEnabled = !gameState.soundEnabled;
            elements.soundText.textContent = gameState.soundEnabled ? 'éŸ³æ•ˆ é–‹å•Ÿ' : 'éŸ³æ•ˆ é—œé–‰';
            elements.soundControl.className = gameState.soundEnabled ? 'sound-control' : 'sound-control disabled';
        }

        // åˆå§‹åŒ–DOMå…ƒç´ 
        function initElements() {
            console.log('åˆå§‹åŒ–DOMå…ƒç´ ...');
            elements.rollBtn = document.getElementById('rollBtn');
            elements.resetBtn = document.getElementById('resetBtn');
            elements.soundControl = document.getElementById('soundControl');
            elements.soundText = document.getElementById('soundText');
            elements.playerWins = document.getElementById('playerWins');
            elements.computerWins = document.getElementById('computerWins');
            elements.playerScore = document.getElementById('playerScore');
            elements.computerScore = document.getElementById('computerScore');
            elements.playerType = document.getElementById('playerType');
            elements.computerType = document.getElementById('computerType');
            elements.gameResult = document.getElementById('gameResult');
            elements.resultTitle = document.getElementById('resultTitle');
            elements.resultDetails = document.getElementById('resultDetails');
            elements.playerResultType = document.getElementById('playerResultType');
            elements.computerResultType = document.getElementById('computerResultType');
            
            // æª¢æŸ¥é—œéµå…ƒç´ æ˜¯å¦å­˜åœ¨
            if (!elements.rollBtn) {
                console.error('æ‰¾ä¸åˆ° rollBtn å…ƒç´ ');
                return false;
            }
            if (!elements.resetBtn) {
                console.error('æ‰¾ä¸åˆ° resetBtn å…ƒç´ ');
                return false;
            }
            if (!elements.soundControl) {
                console.error('æ‰¾ä¸åˆ° soundControl å…ƒç´ ');
                return false;
            }
            
            console.log('æ‰€æœ‰DOMå…ƒç´ åˆå§‹åŒ–æˆåŠŸ');
            return true;
        }

        // åˆå§‹åŒ–å‡½æ•¸
        function initGame() {
            console.log('é–‹å§‹åˆå§‹åŒ–éŠæˆ²...');
            
            // åˆå§‹åŒ–DOMå…ƒç´ 
            if (!initElements()) {
                console.error('DOMå…ƒç´ åˆå§‹åŒ–å¤±æ•—');
                return;
            }
            
            // ç¢ºä¿ DOM å·²è¼‰å…¥
            updateDiceDisplay(true, gameState.playerDice);
            updateDiceDisplay(false, gameState.computerDice, false);
            
            // ç¶å®šäº‹ä»¶ç›£è½å™¨
            elements.rollBtn.addEventListener('click', function() {
                console.log('é–‹å§‹æ“²éª°æŒ‰éˆ•è¢«é»æ“Š');
                rollDice();
            });
            
            elements.resetBtn.addEventListener('click', function() {
                console.log('é‡ç½®éŠæˆ²æŒ‰éˆ•è¢«é»æ“Š');
                resetGame();
            });
            
            elements.soundControl.addEventListener('click', function() {
                console.log('éŸ³æ•ˆæ§åˆ¶æŒ‰éˆ•è¢«é»æ“Š');
                toggleSound();
            });
            
            console.log('éŠæˆ²åˆå§‹åŒ–å®Œæˆï¼');
        }

        // ç•¶ DOM å®Œå…¨è¼‰å…¥å¾ŒåŸ·è¡Œ
        if (document.readyState === 'loading') {
            console.log('ç­‰å¾…DOMè¼‰å…¥...');
            document.addEventListener('DOMContentLoaded', initGame);
        } else {
            console.log('DOMå·²è¼‰å…¥ï¼Œç›´æ¥åˆå§‹åŒ–');
            initGame();
        }
    </script>
</body>
</html>